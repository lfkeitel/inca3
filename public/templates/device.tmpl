{{define "device"}}
    {{template "header"}}

    <script type="text/x-template" id="config-list-template">
        <div class="table-responsive">
            <table class="config-list table table-striped table-hover">
                <thead>
                    <tr>
                        <th v-for="key in tableCols">${key | capitalize}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="entry in tableData" class="clickable-row">
                        <td v-for="key in jsonKeys" v-on:click="gotoConfig(entry['id'])">
                            <span v-if="key == 'created'">${entry[key] | formatDate}</span>
                            <span v-else>
                            <span v-if="key == 'size'">${entry[key] | formatFileSize}</span>
                            <span v-else>${entry[key]}</span>
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </script>

    <script type="text/x-template" id="edit-form-template">
        <form class="edit-form">
            <div class="form-group">
                <label for="deviceName">Name</label>
                <input type="text" class="form-control" id="deviceName" v-model="device.name">
            </div>
            <div class="form-group">
                <label for="deviceAddr">Address</label>
                <input type="text" class="form-control" id="deviceAddr" v-model="device.address">
            </div>
            <div class="form-group">
                <label for="deviceBrand">Brand</label>
                <input type="text" class="form-control" id="deviceBrand" v-model="device.brand">
            </div>
            <div class="form-group">
                <label for="deviceConn">Connection</label>
                <input type="text" class="form-control" id="deviceConn" v-model="device.connection">
            </div>
            <div class="form-group">
                <button class="btn btn-success" v-on:click.prevent="saveDevice">Save Changes</button>
                <button class="btn btn-danger" v-on:click.prevent="cancelEdit">Cancel</button>
            </div>
        </form>
    </script>

    <div class="row clearfix">
        <div class="col-md-12 column" id="app">
            <h2>${device.name}</h2>
            <div id="controls">
                <button v-on:click="editDevice" class="btn btn-primary">Edit</button>
            </div>
            <config-list
                :table-data="tableData"
                :table-cols="tableColumns"
                :json-keys="jsonKeys"
                :device-name="device.id"
                v-if="section == 'configs'">
            </config-list>
            <device-edit-form
                :device="device"
                v-if="section == 'deviceEdit'"
                v-on:cancel-edit="cancelEdit">
            </device-edit-form>
        </div>
    </div>

    {{template "footer" dict "e" $.e "js" (list "device")}}
{{end}}